# See https://docs.openebs.io/docs/next/installation.html#installation-through-helm

- name: Create k8s namespace for OpenEBS
  shell: kubectl --kubeconfig /etc/kubernetes/admin.conf create ns openebs
  register: openebs_deployment

- set_fact: label="{{ kubernetes_helm_deployment_label }}"

- name: Deploy OpenEBS using Helm
  shell: helm install openebs stable/openebs --version 1.9.0 --namespace openebs
  when: not openebs_deployment.stdout.find(label)