---


- name: Add OpenJDK 8 repository to sources (Debian/Ubuntu)
  apt_repository: repo='ppa:openjdk-r/ppa' state=present update_cache=yes
  when: is_debian_or_ubuntu and "java_version == 8"


- name: Installing openjdk-doc (Debian/Ubuntu)
  apt: name=openjdk-{{ java_version }}-doc state=present update_cache=yes cache_valid_time=8600
  when: is_debian_or_ubuntu


- name: Installing openjdk-jdk (Debian/Ubuntu)
  apt: name=openjdk-{{ java_version }}-jdk state=present update_cache=yes cache_valid_time=8600
  when: is_debian_or_ubuntu


- name: install selinux bindings (RedHat/CentOS)
  yum: name=libselinux-python state=present
  when: not is_debian_or_ubuntu


- name: Installing JDK (RedHat/CentOS)
  yum: name={{item}} state=present
  with_items: "java-1.{{ java_version }}.0-openjdk"
  when: not is_debian_or_ubuntu


- name: Select java version
  alternatives:
    name: java
    path: /usr/lib/jvm/java-{{ java_version }}-openjdk-amd64/bin/java


- name: Select javac version
  alternatives:
    name: javac
    path: /usr/lib/jvm/java-{{ java_version }}-openjdk-amd64/bin/javac


- name: Select jar version
  alternatives:
    name: jar
    path: /usr/lib/jvm/java-{{ java_version }}-openjdk-amd64/bin/jar

- name: Select jps version
  alternatives:
    name: jps
    path: /usr/lib/jvm/java-{{ java_version }}-openjdk-amd64/bin/jps
